# Pricing Proposal PDF – Finished Product Sample (2.3)

This document describes what the **Pricing Proposal PDF** (download / email attachment) can look like when implemented. The backend endpoint `GET /quotes/:id/pdf` is currently stubbed (501); this sample is for review and implementation reference. The document is not an official quote; all customer-facing references use **Pricing Proposal**.

**Multipage sample:** A 2–3 page sample PDF with repeating headers and footers is generated by the script `backend/scripts/generate-sample-pricing-proposal-pdf.ts`. Output: `docs/sample-pricing-proposal-multipage.pdf`. Run from the backend folder: `npx tsx scripts/generate-sample-pricing-proposal-pdf.ts`.

---

## Data on the PDF

- **Header:** Logo (optional), “PRICING PROPOSAL”, proposal number (e.g. PP#000042), date.
- **Bill to:** Customer name, company (if any), email, optional address.
- **Proposal details:** Optional price contract name, terms (e.g. Net 30), valid-until date if set.
- **Line items table:** Part number (with * / † if SPA or pricing contract), description, qty, unit price (sell), line total.
- **Totals:** Subtotal (or direct total), optional tax/freight placeholders, **grand total**.
- **Notes:** Proposal notes (if any).
- **Contact (end of document):** RSM and Distributor contact block: for each, **photo/avatar icon**, name, email, phone (and optional title: “Your WAGO Contact” / “Your Distributor”). RSM first, then Distributor. Sourced from quote owner’s hierarchy (e.g. quote user’s assigned RSM; quote user if they are the distributor, or their distributor).
- **Footer:** Terms & conditions, page number (no Generated by line).

---

## Sample Layout (Text Mockup)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Logo]                    WAGO HUB / WAIGO              PRICING PROPOSAL   │
│                                                                             │
│  Proposal #: PP#000042                 Date: February 10, 2026              │
│  Price Contract: Q1 2026 – Region A    (if applicable)                       │
├─────────────────────────────────────────────────────────────────────────────┤
│  BILL TO                                                                   │
│  ABC Electric Co.                                                          │
│  123 Industrial Blvd.                                                      │
│  City, ST 12345                                                            │
│  contact@abcelectric.com                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  LINE ITEMS                                                                │
│  ┌──────────────┬─────────────────────────────┬──────┬──────────┬─────────┐│
│  │ Part Number  │ Description                 │ Qty  │ Price    │ Total   ││
│  ├──────────────┼────────────────────────────┼──────┼──────────┼─────────┤│
│  │ 750-343*     │ 3-pos terminal block 16A    │  50  │ $2.45    │ $122.50 ││
│  │ 750-362 †    │ 2-pos terminal block 16A    │ 100  │ $1.89    │ $189.00 ││
│  │ 750-880      │ End clamp                   │  50  │ $0.42    │  $21.00 ││
│  └──────────────┴────────────────────────────┴──────┴──────────┴─────────┘│
│                                                                             │
│  * Cost affected by SPA/discount    † Sell price from pricing contract     │
│                                                                             │
│                                              Subtotal:              $332.50 │
│                                              TOTAL:                 $332.50 │
├─────────────────────────────────────────────────────────────────────────────┤
│  Terms: Net 30                                                              │
│  Valid for 30 days from quote date.                                         │
│                                                                             │
│  Notes: Minimum order 100 pcs for 750-362.                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│  CONTACT                                                                   │
│  ┌─────────────────────────────────────┐ ┌────────────────────────────────┐│
│  │ [Photo]  Your WAGO Contact           │ │ [Photo]  Your Distributor      ││
│  │          Jane Smith                  │ │          John Doe              ││
│  │          jane.smith@example.com      │ │          john.doe@dist.com     ││
│  │          (555) 123-4567              │ │          (555) 987-6543        ││
│  └─────────────────────────────────────┘ └────────────────────────────────┘│
├─────────────────────────────────────────────────────────────────────────────┤
│  Thank you for your business.                                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Sample Layout (Rough Visual – HTML Preview)

A simple HTML version of the same layout is in `docs/quote-pdf-sample.html`. Open it in a browser to see a more realistic “finished product” look (titled “Pricing Proposal”). The real PDF would be generated server-side (e.g. with PDFKit or jsPDF) using the same structure and styling.

---

## Implementation Notes

- **Source data:** Same as quote detail + CSV: `Quote` (quoteNumber, customerName, customerEmail, customerCompany, notes, terms, total, priceContract name) and `QuoteItem[]` (snapshotPartNumber, snapshotDescription, quantity, sellPrice, lineTotal, isCostAffected, isSellAffected). **Contact block:** Resolve RSM and Distributor from quote owner (e.g. `quote.userId` → user’s `assignedToRsmId` for RSM, `assignedToDistributorId` or self if role DISTRIBUTOR_REP for Distributor); include each person’s firstName, lastName, email, phone, avatarUrl (for photo icon).
- **Terms:** Each RSM/Distributor has a **Terms** text field in Profile (User.defaultTerms), editable on the user profile page. Use this as the **default terms text on the PDF**: when generating the PDF, show `quote.terms`; when creating or editing a quote, default `quote.terms` from the quote owner’s `User.defaultTerms` if the quote’s terms are empty. So the PDF Terms section displays the quote’s terms, which are pre-filled from the profile Terms when applicable.
- **Indicators:** Include * and † next to part numbers when `isCostAffected` / `isSellAffected` are true; legend at bottom of line items (as in the mockup).
- **Filename:** e.g. `PricingProposal_PP000042.pdf` (match email attachment naming).
- **Email:** When “Email Pricing Proposal” is used, attach this PDF via `sendQuoteEmail({ ... params, pdfBuffer })` so the customer receives the same document.

This sample aligns with **section 2.3** (Pricing Proposal PDF output) for review and implementation. The document is not an official quote; all references use **Pricing Proposal**.

---

## Reminder: Download PDF on Finished Quote Page

**A Download PDF button has not been added to the Finished Quote (quote detail) page yet.** The page currently has a **Download CSV** button only. When `GET /quotes/:id/pdf` is implemented, add a **Download PDF** (or “Download Pricing Proposal”) button next to the CSV button that calls `quoteApi.generatePDF(id)` and saves the blob as `PricingProposal_{quoteNumber}.pdf`.
